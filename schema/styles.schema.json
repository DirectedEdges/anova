{
  "version": "0.7.0",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/DirectedEdges/anova/main/styles.schema.json",
  "title": "Anova Styles Schema",
  "description": "JSON Schema for style properties emitted by the Anova Figma plugin",
  "$comment": "Copyright (c) 2025 Directed Edges. Licensed under CC BY 4.0 (https://creativecommons.org/licenses/by/4.0/). Attribution required.",
  "definitions": {
    "Styles": {
      "type": "object",
      "description": "Collection of style properties emitted by Styles.data(). Each property value depends on its type (RAW, VARIABLE, STYLE, REFERENCE) and config.format settings (simplifyVariables, simplifyStyles). Applicable properties vary by element type.",
      "properties": {
        "rotation": { "$ref": "#/definitions/NumberStyleValue", "description": "Rotation in degrees" },
        "visible": { "$ref": "#/definitions/BooleanBindableStyleValue", "description": "Visibility. Can be bound to component prop." },
        "opacity": { "$ref": "#/definitions/NumberStyleValue", "description": "Opacity 0-1" },
        "locked": { "$ref": "#/definitions/BooleanStyleValue", "description": "Lock state" },
        "backgroundColor": { "$ref": "#/definitions/ColorStyleValue", "description": "Background fill color. Present on all non-text element types. Represented in Figma as fills." },
        "textColor": { "$ref": "#/definitions/ColorStyleValue", "description": "Text fill color. Present on TEXT element type only. Represented in Figma as fills." },
        "effectStyleId": { "$ref": "#/definitions/StyleIdValue", "description": "Effect style reference" },
        "clipContent": { "$ref": "#/definitions/BooleanStyleValue", "description": "Clip content" },
        "cornerRadius": { "$ref": "#/definitions/CornerStyleValue", "description": "Uniform corner radius" },
        "width": { "$ref": "#/definitions/NumberStyleValue", "description": "Width in pixels" },
        "height": { "$ref": "#/definitions/NumberStyleValue", "description": "Height in pixels" },
        "minWidth": { "$ref": "#/definitions/NumberStyleValue", "description": "Minimum width" },
        "minHeight": { "$ref": "#/definitions/NumberStyleValue", "description": "Minimum height" },
        "maxWidth": { "$ref": "#/definitions/NumberStyleValue", "description": "Maximum width" },
        "maxHeight": { "$ref": "#/definitions/NumberStyleValue", "description": "Maximum height" },
        "x": { "$ref": "#/definitions/NumberStyleValue", "description": "X position" },
        "y": { "$ref": "#/definitions/NumberStyleValue", "description": "Y position" },
        "layoutPositioning": { "$ref": "#/definitions/StringStyleValue", "description": "Layout positioning mode" },
        "layoutSizingHorizontal": { "$ref": "#/definitions/StringStyleValue", "description": "Horizontal sizing mode" },
        "layoutSizingVertical": { "$ref": "#/definitions/StringStyleValue", "description": "Vertical sizing mode" },
        "strokes": { "$ref": "#/definitions/ColorStyleValue", "description": "Stroke colors" },
        "strokeAlign": { "$ref": "#/definitions/MixedStringStyleValue", "description": "Stroke alignment" },
        "strokeWeight": { "$ref": "#/definitions/StrokeStyleValue", "description": "Uniform stroke weight" },
        "strokeTopWeight": { "$ref": "#/definitions/StrokeStyleValue", "description": "Top stroke weight" },
        "strokeBottomWeight": { "$ref": "#/definitions/StrokeStyleValue", "description": "Bottom stroke weight" },
        "strokeLeftWeight": { "$ref": "#/definitions/StrokeStyleValue", "description": "Left stroke weight" },
        "strokeRightWeight": { "$ref": "#/definitions/StrokeStyleValue", "description": "Right stroke weight" },
        "fontSize": { "$ref": "#/definitions/MixedNumberStyleValue", "description": "Font size in pixels" },
        "fontFamily": { "$ref": "#/definitions/FontStyleValue", "description": "Font family" },
        "fontWeight": { "$ref": "#/definitions/FontStyleValue", "description": "Font weight" },
        "lineHeight": { "$ref": "#/definitions/LineHeightStyleValue", "description": "Line height" },
        "letterSpacing": { "$ref": "#/definitions/MixedNumberStyleValue", "description": "Letter spacing" },
        "textDecoration": { "$ref": "#/definitions/MixedStringStyleValue", "description": "Text decoration" },
        "textCase": { "$ref": "#/definitions/MixedStringStyleValue", "description": "Text case" },
        "paragraphIndent": { "$ref": "#/definitions/NumberStyleValue", "description": "Paragraph indent" },
        "paragraphSpacing": { "$ref": "#/definitions/NumberStyleValue", "description": "Paragraph spacing" },
        "leadingTrim": { "$ref": "#/definitions/MixedNumberStyleValue", "description": "Leading trim" },
        "listSpacing": { "$ref": "#/definitions/NumberStyleValue", "description": "List spacing" },
        "hangingPunctuation": { "$ref": "#/definitions/BooleanStyleValue", "description": "Hanging punctuation" },
        "hangingList": { "$ref": "#/definitions/BooleanStyleValue", "description": "Hanging list" },
        "textStyleId": { "$ref": "#/definitions/StyleIdValue", "description": "Text style reference" },
        "textAlignHorizontal": { "$ref": "#/definitions/StringStyleValue", "description": "Horizontal text alignment" },
        "textAlignVertical": { "$ref": "#/definitions/StringStyleValue", "description": "Vertical text alignment" },
        "primaryAxisAlignItems": { "$ref": "#/definitions/StringStyleValue", "description": "Primary axis item alignment" },
        "primaryAxisSizingMode": { "$ref": "#/definitions/StringStyleValue", "description": "Primary axis sizing mode" },
        "counterAxisAlignItems": { "$ref": "#/definitions/StringStyleValue", "description": "Counter axis item alignment" },
        "counterAxisAlignContent": { "$ref": "#/definitions/StringStyleValue", "description": "Counter axis content alignment" },
        "layoutMode": { "$ref": "#/definitions/StringStyleValue", "description": "Layout mode" },
        "layoutWrap": { "$ref": "#/definitions/StringStyleValue", "description": "Layout wrap mode" },
        "itemReverseZIndex": { "$ref": "#/definitions/BooleanStyleValue", "description": "Reverse z-index stacking" },
        "itemSpacing": { "$ref": "#/definitions/NumberStyleValue", "description": "Item spacing" },
        "paddingLeft": { "$ref": "#/definitions/MixedNumberStyleValue", "description": "Left padding" },
        "paddingRight": { "$ref": "#/definitions/MixedNumberStyleValue", "description": "Right padding" },
        "paddingTop": { "$ref": "#/definitions/MixedNumberStyleValue", "description": "Top padding" },
        "paddingBottom": { "$ref": "#/definitions/MixedNumberStyleValue", "description": "Bottom padding" },
        "counterAxisSpacing": { "$ref": "#/definitions/NumberStyleValue", "description": "Counter axis spacing" },
        "topLeftRadius": { "$ref": "#/definitions/CornerStyleValue", "description": "Top-left corner radius" },
        "topRightRadius": { "$ref": "#/definitions/CornerStyleValue", "description": "Top-right corner radius" },
        "bottomLeftRadius": { "$ref": "#/definitions/CornerStyleValue", "description": "Bottom-left corner radius" },
        "bottomRightRadius": { "$ref": "#/definitions/CornerStyleValue", "description": "Bottom-right corner radius" },
        "cornerSmoothing": { "$ref": "#/definitions/NumberStyleValue", "description": "Degree of corner smoothing (0 = standard circular corners, 1 = fully smooth iOS-style squircle). Applies to FRAME, COMPONENT, RECTANGLE, POLYGON, STAR, VECTOR, and ELLIPSE element types." }
      },
      "additionalProperties": false
    },
    "NumberStyleValue": {
      "description": "Pure number style value (from NumberStyle processor)",
      "oneOf": [
        { "type": "number" },
        { "$ref": "#/definitions/VariableStyle" },
        { "type": "null" }
      ]
    },
    "BooleanStyleValue": {
      "description": "Boolean style value (from BooleanStyle processor)",
      "oneOf": [
        { "type": "boolean" },
        { "$ref": "#/definitions/VariableStyle" },
        { "type": "null" }
      ]
    },
    "BooleanBindableStyleValue": {
      "description": "Boolean style value that can be bound to props (visible only)",
      "oneOf": [
        { "type": "boolean" },
        { "$ref": "#/definitions/VariableStyle" },
        { "$ref": "#/definitions/ReferenceValue" },
        { "type": "null" }
      ]
    },
    "ColorStyleValue": {
      "description": "Color style value (from ColorStyle processor)",
      "oneOf": [
        { "type": "string", "description": "Hex/rgba color string" },
        { "$ref": "#/definitions/VariableStyle" },
        { "$ref": "#/definitions/FigmaStyle" },
        { "type": "null" }
      ]
    },
    "StringStyleValue": {
      "description": "Pure string style value (from StringStyle processor)",
      "oneOf": [
        { "type": "string" },
        { "$ref": "#/definitions/VariableStyle" },
        { "type": "null" }
      ]
    },
    "MixedNumberStyleValue": {
      "description": "Numeric style that can have 'mixed' value (from MixedStyle processor)",
      "oneOf": [
        { "type": "number" },
        { "type": "string", "const": "mixed" },
        { "$ref": "#/definitions/VariableStyle" },
        { "type": "null" }
      ]
    },
    "MixedStringStyleValue": {
      "description": "String style that can have 'mixed' value (from MixedStyle processor)",
      "oneOf": [
        { "type": "string" },
        { "$ref": "#/definitions/VariableStyle" },
        { "type": "null" }
      ]
    },
    "StrokeStyleValue": {
      "description": "Stroke weight value (from StrokeStyle processor)",
      "oneOf": [
        { "type": "number" },
        { "type": "string", "const": "mixed" },
        { "$ref": "#/definitions/VariableStyle" },
        { "type": "null" }
      ]
    },
    "CornerStyleValue": {
      "description": "Corner radius value (from CornerStyle processor)",
      "oneOf": [
        { "type": "number" },
        { "type": "string", "const": "mixed" },
        { "$ref": "#/definitions/VariableStyle" },
        { "type": "null" }
      ]
    },
    "FontStyleValue": {
      "description": "Font family/weight value (from FontStyle processor)",
      "oneOf": [
        { "type": "string" },
        { "type": "number", "description": "Font weight numeric value" },
        { "type": "string", "const": "mixed" },
        { "type": "null" }
      ]
    },
    "LineHeightStyleValue": {
      "description": "Line height value (from LineHeightStyle processor)",
      "oneOf": [
        { "type": "string", "description": "Percentage (e.g., '150%') or 'auto'" },
        { "type": "number", "description": "Pixel value" },
        { "$ref": "#/definitions/VariableStyle" },
        { "type": "null" }
      ]
    },
    "StyleIdValue": {
      "description": "Style ID reference (textStyleId, effectStyleId)",
      "oneOf": [
        { "type": "string", "description": "Style ID when simplified" },
        { "$ref": "#/definitions/FigmaStyle", "description": "Full style object when not simplified" },
        { "type": "null" }
      ]
    },
    "ReferenceValue": {
      "type": "object",
      "description": "Reference to a component property binding. Emitted when a style is bound to a prop (e.g., visible bound to a boolean prop).",
      "properties": {
        "$ref": {
          "type": "string",
          "description": "JSON pointer to the referenced prop, e.g. '#/props/propName'"
        }
      },
      "required": ["$ref"],
      "additionalProperties": false
    },
    "VariableStyle": {
      "type": "object",
      "description": "Reference to a Figma variable. May include resolved metadata depending on config.format.simplifyVariables setting. When simplified, emits as string instead of object.",
      "properties": {
        "id": { "type": "string", "description": "Figma variable ID" },
        "rawValue": { "type": ["string", "number", "boolean"], "description": "The underlying raw value for rendering" },
        "name": { "type": "string", "description": "Variable name in collection" },
        "variableName": { "type": "string", "description": "Alternative variable name field" },
        "collectionName": { "type": "string", "description": "Name of the variable collection" },
        "collectionId": { "type": "string", "description": "Figma collection ID" }
      },
      "required": ["id"],
      "additionalProperties": false
    },
    "FigmaStyle": {
      "type": "object",
      "description": "Reference to a Figma style (color, text, effect). May include resolved name depending on config.format.simplifyStyles setting. When simplified, emits as string instead of object.",
      "properties": {
        "id": { "type": "string", "description": "Figma style ID" },
        "name": { "type": "string", "description": "Style name" }
      },
      "required": ["id"],
      "additionalProperties": false
    }
  }
}
